name:  CI/CD Selenium Tests

on:  [push, pull_request]

jobs:  
  selenium-test:
    runs-on:  ubuntu-latest
    steps:
      - name:  Checkout repository
        uses:  actions/checkout@v2

      - name:  Setup .NET
        uses:  actions/setup-dotnet@v3
        with:
          dotnet-version:  '8.0.x'

      - name:  Install dependencies
        run:  dotnet restore

      - name:  Run SpecFlow tests
        run:  dotnet test --logger trx

      - name:  Upload Screenshots
        uses:  actions/upload-artifact@v4
        with:
          name:  test-screenshots -${{ github.run_id }}
          path: screenshots

  windows-test:
    runs-on:  windows-latest
    steps:
      - name:  Checkout repository
        uses:  actions/checkout@v2
        
      - name:  Setup .NET
        uses:  actions/setup-dotnet@v3
        with:
          dotnet-version:  '8.0.x'

      - name:  Install dependencies
        run:  dotnet restore

      - name:  Run specFlow tests
        run:  dotnet test --logger trx

      - name:  Upload Screenshots
        uses:  actions/upload-artifact@v4
        with:
          name:  test-screenshots -${{ github.run_id }}
          path:  screenshots/